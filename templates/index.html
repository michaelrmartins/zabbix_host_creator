<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zabbix Host Creator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üñ•Ô∏è Zabbix Host Creator</h1>
            <p>Create multiple Zabbix hosts and manage interfaces with ease</p>
        </div>
        
        <!-- Tabs -->
        <div class="tabs">
            <button class="tab active" onclick="showTab('create-hosts')">Create Hosts</button>
            <button class="tab" onclick="showTab('host-interface')">Host Interface</button>
        </div>
        
        <!-- Create Hosts Tab -->
        <div id="create-hosts" class="tab-content active">
            <form id="hostForm">
                <div class="form-group">
                    <label for="base_hostname">Base Hostname:</label>
                    <input type="text" id="base_hostname" name="base_hostname" placeholder="e.g., Tplink" required>
                    
                    <div class="toggle-container">
                        <div class="toggle-switch" id="ipToggle">
                            <div class="toggle-slider"></div>
                        </div>
                        <span class="toggle-label">Use IP Address as Hostname</span>
                    </div>
                    
                    <small id="hostnameHelp" style="color: #666; margin-top: 5px; display: block;">
                        Hosts will be created as: Tplink-01, Tplink-02, etc.
                    </small>
                </div>
                
                <div class="form-group">
                    <label for="ip_list">IP Addresses (comma-separated):</label>
                    <textarea id="ip_list" name="ip_list" placeholder="192.168.1.1, 192.168.1.2, 192.168.1.3" required></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="group_id">Zabbix Host Group:</label>
                        <select id="group_id" name="group_id" required>
                            <option value="">Loading groups...</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="create_interface_type">Interface Type:</label>
                        <select id="create_interface_type" name="create_interface_type" required>
                            <option value="1" selected>Agent (Port 10050)</option>
                            <option value="2">SNMP (Port 161)</option>
                            <option value="3">IPMI (Port 623)</option>
                            <option value="4">JMX (Port 12345)</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="create_interface_port">Custom Port (optional):</label>
                    <input type="number" id="create_interface_port" name="create_interface_port" placeholder="Leave empty for default port" min="1" max="65535">
                    <small style="color: #666; margin-top: 5px; display: block;">
                        Leave empty to use the default port for the selected interface type
                    </small>
                </div>
                
                <div class="button-group">
                    <button type="button" id="testBtn" class="btn-secondary">Test Connection</button>
                    <button type="submit" id="createBtn" class="btn-primary">Create Hosts</button>
                </div>
            </form>
        </div>
        
        <!-- Host Interface Tab -->
        <div id="host-interface" class="tab-content">
            <form id="interfaceForm">
                <div class="form-group">
                    <label for="interface_group_id">Select Host Group:</label>
                    <select id="interface_group_id" name="interface_group_id" required>
                        <option value="">Loading groups...</option>
                    </select>
                    <button type="button" id="loadHostsBtn" class="btn-secondary" style="margin-top: 10px; width: auto; padding: 8px 16px;">Load Hosts</button>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="interface_type">Interface Type:</label>
                        <select id="interface_type" name="interface_type" required>
                            <option value="1">Agent</option>
                            <option value="2">SNMP</option>
                            <option value="3">IPMI</option>
                            <option value="4">JMX</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="interface_port">Port:</label>
                        <input type="number" id="interface_port" name="interface_port" value="10050" min="1" max="65535">
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Operation:</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="add_operation" name="operation" value="add" checked>
                            <label for="add_operation">Add Interface</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="remove_operation" name="operation" value="remove">
                            <label for="remove_operation">Remove Interface</label>
                        </div>
                    </div>
                </div>
                
                <div class="button-group">
                    <button type="submit" id="updateInterfacesBtn" class="btn-primary">Update Interfaces</button>
                </div>
            </form>
            
            <!-- Host List -->
            <div id="hostList" class="host-list" style="display: none;">
                <div id="hostListContent"></div>
            </div>
        </div>
        
        <div class="spinner" id="spinner"></div>
        
        <div class="status" id="status"></div>
        
        <div class="results" id="results">
            <div class="results-header">
                <h3 id="resultsTitle">Results</h3>
            </div>
            <div class="results-body" id="resultsBody"></div>
        </div>
    </div>
    
    <div class="connection-status" id="connectionStatus">
        Checking connection...
    </div>

    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>